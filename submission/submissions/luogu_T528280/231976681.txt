//  OJ: 洛谷
//  提交ID: 231976681
//  题目ID: T528280
#include <bits/stdc++.h>
using namespace std;
long long a[5000 + 5];
int n, mod, dp[2][5000 + 5][5000 + 5], t[2][5000 + 5][5000 + 5], C[5000 + 5][5000 + 5], Sumdp[5000 + 5], SumT[5000 + 5];
signed main() {
	cin.tie(0)->sync_with_stdio(false);
	cin >> n >> mod;
	for (int i = 1; i <= n; ++i) cin >> a[i];
	for (int i = 0; i <= n; ++i) C[i][0] = 1;
	for (int i = 1; i <= n; ++i)
		for (int j = 1; j <= i; ++j)
			C[i][j] = (C[i - 1][j - 1] + C[i - 1][j]) % mod;
	sort(a + 1, a + 1 + n);
	long long ans = 0;
	for (int i = 2; i <= n; ++i)
		for (int j = 1; j <= i - 1; ++j)
			dp[0][i][j] = 1, t[0][i][j] = 2,
			ans = (ans + C[i - 1][j] * (j + 1ll) % mod * a[i] % mod) % mod;
	for (int i = 1, l = 2; i <= n; l = ++i + 1)
		for (int j = 1; j <= i - 1; ++j) {
			Sumdp[j] = (Sumdp[j] + dp[1][i][j]) % mod; SumT[j] = (SumT[j] + t[1][i][j]) % mod;
			dp[0][i][j] = (dp[0][i][j] + Sumdp[j]) % mod; t[0][i][j] = (t[0][i][j] + SumT[j]) % mod;
			l = max(l, i + 1);
			for (; l <= n; l++)
				if (a[i] + a[j] <= a[l]) {
					dp[1][l][i] = (dp[1][l][i] + dp[0][i][j]) % mod;
					t[1][l][i] = ((t[1][l][i] + t[0][i][j]) % mod + dp[0][i][j]) % mod;
					break;
				}
		}
	for (int i = 1; i <= n; ++i)
		for (int j = 1; j <= i - 1; ++j)
			ans = (ans - 1ll * t[0][i][j] * a[i] % mod) % mod;
	cout << (ans + mod) % mod << endl;
	return 0;
}