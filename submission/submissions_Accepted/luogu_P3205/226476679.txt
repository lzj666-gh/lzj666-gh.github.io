//  OJ: 洛谷
//  提交ID: 226476679
//  题目ID: P3205
#include<bits/stdc++.h>
using namespace std;
const int mod = 19650827;
int f[2005][2005][2], a[2005], n;
int main() {
	cin.tie(0)->sync_with_stdio(false);
	cin >> n;
	for (int i = 1; i <= n; i++) cin >> a[i];
	for (int i = 1; i <= n; i++) f[i][i][1] = 1;
	for (int l = 1; l <= n; l++)
		for (int i = 1, j = i + l; j <= n; i++, j++) {
			if (a[i] < a[i + 1]) f[i][j][1] += f[i + 1][j][1];
			if (a[i] < a[j    ]) f[i][j][1] += f[i + 1][j][0];
			if (a[j] > a[j - 1]) f[i][j][0] += f[i][j - 1][0];
			if (a[j] > a[i    ]) f[i][j][0] += f[i][j - 1][1];
			f[i][j][0] %= mod; f[i][j][1] %= mod;
		}
	cout << (f[1][n][0] + f[1][n][1]) % mod;
	return 0;
}
